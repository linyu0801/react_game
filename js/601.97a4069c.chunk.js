"use strict";(self.webpackChunkreact_game=self.webpackChunkreact_game||[]).push([[601],{601:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var r=n(294),o=n(250),a=n(177),l=n(513);const s=[[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]];let i=function(e){return e[e.PLAYER_ONE=0]="PLAYER_ONE",e[e.PLAYER_TWO=1]="PLAYER_TWO",e}({});const c={currentRole:i.PLAYER_ONE,currentRound:i.PLAYER_ONE,playOneChess:[],playTwoChess:[],playOneRemainSteps:[],playTwoRemainSteps:[],isPlayerOneWin:!1,isPlayerTwoWin:!1,isGameEnd:!1,mode:"single",ws:null},d=e=>s.map((t=>t.filter((t=>!e.includes(t))))),p=e=>e.some((e=>0===e.length)),u=(0,l.Uy)(((e,t)=>{switch(t.type){case"SET_PLAYER_ONE_CHESS":e.playOneChess.push(t.payload),e.playOneRemainSteps=d(e.playOneChess),e.isPlayerOneWin=p(e.playOneRemainSteps),e.isGameEnd=e.isPlayerOneWin,e.currentRound=i.PLAYER_TWO,"multi"!==e.mode&&(e.currentRole=i.PLAYER_TWO);break;case"SET_PLAYER_TWO_CHESS":e.playTwoChess.push(t.payload),e.playTwoRemainSteps=d(e.playTwoChess),e.isPlayerTwoWin=p(e.playTwoRemainSteps),e.isGameEnd=e.isPlayerTwoWin,e.currentRound=i.PLAYER_ONE,"multi"!==e.mode&&(e.currentRole=i.PLAYER_ONE);break;case"SET_ROLE":e.currentRole=t.payload;break;case"CHANGE_MODE":e.mode=t.payload;break;case"RESTART_GAME":e.playOneChess=[],e.playTwoChess=[],e.playOneRemainSteps=[],e.playTwoRemainSteps=[],e.isPlayerOneWin=!1,e.isPlayerTwoWin=!1,e.isGameEnd=!1;break;case"SET_SOCKET":e.ws=t.payload}}));var h=n(133);let y=function(e){return e.IS_GAME_PROCESSING="IS_GAME_PROCESSING",e.PLAYER_ONE_WIN="PLAYER_ONE_WIN",e.PLAYER_TWO_WIN="PLAYER_TWO_WIN",e.IS_TIE="IS_TIE",e}({});var E=n(893);var m=function(e){let{currentRole:t,winStatus:n,currentRound:o}=e;const a=(0,r.useMemo)((()=>{const e=t===o,r=e?"您":"對方",a=n===y.IS_TIE,l=n===y.PLAYER_ONE_WIN||n===y.PLAYER_TWO_WIN;return a?"遊戲結束：平手":l?`遊戲結束，${e?"恭喜":""}${r}獲勝`:`輪到${r}選擇`}),[t,n,o]);return(0,E.jsxs)(_,{children:[(0,E.jsx)(R,{children:"圈圈叉叉小遊戲"}),a]})};const _=h.ZP.div.withConfig({displayName:"InfoSection__StyledInfoText"})(["color:#121212;font-size:20px;text-align:center;margin-bottom:20px;"]),R=h.ZP.h1.withConfig({displayName:"InfoSection__StyledTitle"})(["font-size:24px;text-align:center;margin:10px 0;"]);var g;function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}const w=(e,t)=>{let{title:n,titleId:o,...a}=e;return r.createElement("svg",C({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",ref:t,"aria-labelledby":o},a),n?r.createElement("title",{id:o},n):null,g||(g=r.createElement("path",{d:"M512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256zM256 48C141.1 48 48 141.1 48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48z"})))},O=(0,r.forwardRef)(w);var S;n.p;function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}const P=(e,t)=>{let{title:n,titleId:o,...a}=e;return r.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 492 492",ref:t,"aria-labelledby":o},a),n?r.createElement("title",{id:o},n):null,S||(S=r.createElement("path",{d:"M300.188,246L484.14,62.04c5.06-5.064,7.852-11.82,7.86-19.024c0-7.208-2.792-13.972-7.86-19.028L468.02,7.872 c-5.068-5.076-11.824-7.856-19.036-7.856c-7.2,0-13.956,2.78-19.024,7.856L246.008,191.82L62.048,7.872    c-5.06-5.076-11.82-7.856-19.028-7.856c-7.2,0-13.96,2.78-19.02,7.856L7.872,23.988c-10.496,10.496-10.496,27.568,0,38.052    L191.828,246L7.872,429.952c-5.064,5.072-7.852,11.828-7.852,19.032c0,7.204,2.788,13.96,7.852,19.028l16.124,16.116    c5.06,5.072,11.824,7.856,19.02,7.856c7.208,0,13.968-2.784,19.028-7.856l183.96-183.952l183.952,183.952    c5.068,5.072,11.824,7.856,19.024,7.856h0.008c7.204,0,13.96-2.784,19.028-7.856l16.12-16.116    c5.06-5.064,7.852-11.824,7.852-19.028c0-7.204-2.792-13.96-7.852-19.028L300.188,246z"})))},T=(0,r.forwardRef)(P);n.p;var f={Container:h.ZP.div.withConfig({displayName:"style__Container"})(["width:100%;max-width:600px;margin:0 auto;padding:16px;background:white;border-radius:10px;"]),Checkerboard:h.ZP.div.withConfig({displayName:"style__Checkerboard"})(["display:grid;grid-template-columns:repeat(3,1fr);gap:4px;width:100%;margin-bottom:20px;"]),Chess:h.ZP.div.withConfig({displayName:"style__Chess"})(["background:",";border-radius:16px;padding:16px;aspect-ratio:1;display:flex;align-items:center;justify-content:center;&:hover{background-color:",";}"],(e=>{let{theme:t}=e;return t.chess.normal}),(e=>{let{$disabled:t,theme:n}=e;return t?n.chess.normal:n.chess.hover})),CircleIcon:(0,h.ZP)(O).withConfig({displayName:"style__CircleIcon"})(["fill:white;width:80%;"]),CloseIcon:(0,h.ZP)(T).withConfig({displayName:"style__CloseIcon"})(["fill:white;width:80%;"]),RestartButton:h.ZP.button.withConfig({displayName:"style__RestartButton"})(["background:",";color:",";border:none;border-radius:10px;width:33%;padding:10px 16px;display:block;margin:10px auto;&:hover{background-color:",";}"],(e=>{let{theme:t}=e;return t.button.normal}),(e=>{let{theme:t}=e;return t.color}),(e=>{let{theme:t}=e;return t.button.hover})),ToggleModeButton:h.ZP.button.withConfig({displayName:"style__ToggleModeButton"})(["background:",";color:",";border:none;border-radius:10px;width:33%;padding:10px 16px;display:block;margin:10px auto;&:hover{background-color:",";}"],(e=>{let{theme:t}=e;return t.button.normal}),(e=>{let{theme:t}=e;return t.color}),(e=>{let{theme:t}=e;return t.button.hover}))};const x=[...Array(9)].map(((e,t)=>t+1));var I=function(){const[e,t]=(0,r.useReducer)(u,c),{roomId:n}=(0,o.UO)(),{currentRole:l,currentRound:s,isPlayerOneWin:d,isPlayerTwoWin:p,playOneChess:h,playTwoChess:_,mode:R,ws:g}=e,C="multi"===R,w=d||p,O=h.length+_.length===9,S=w||O,b=(0,r.useMemo)((()=>O?y.IS_TIE:d?y.PLAYER_ONE_WIN:p?y.PLAYER_TWO_WIN:y.IS_GAME_PROCESSING),[d,p,O]),P=()=>{C&&g?.emit("restart",n),t({type:"RESTART_GAME"})},T=(e,n)=>{e===i.PLAYER_ONE?t({type:"SET_PLAYER_ONE_CHESS",payload:n}):t({type:"SET_PLAYER_TWO_CHESS",payload:n})};return(0,r.useEffect)((()=>{let e;return n&&(e=(0,a.io)("http://localhost:3000"),e.on("connect",(()=>{e.emit("join",n)})),(e=>{e&&(e.on("join",(e=>{let{isSuccess:n,playerIndex:r}=e;void 0!==r&&n&&(t({type:"SET_ROLE",payload:r}),console.log("join",{isSuccess:n,playerIndex:r}))})),e.on("chessDown",(e=>{let{chessIndex:t,playerIndex:n}=e;console.log("chessDown",{chessIndex:t,playerIndex:n}),T(n,t)})),e.on("restart",(()=>{P()})))})(e),t({type:"SET_SOCKET",payload:e}),t({type:"CHANGE_MODE",payload:"multi"})),()=>{e&&e.emit("disconnect",n)}}),[n]),(0,E.jsxs)(f.Container,{children:[(0,E.jsx)(m,{currentRole:l,currentRound:s,isGameOver:S,winStatus:b}),(0,E.jsx)(f.ToggleModeButton,{onClick:()=>{t({type:"CHANGE_MODE",payload:C?"multi":"single"})},children:C?"多人模式":"單人模式"}),(0,E.jsx)(f.Checkerboard,{children:x.map((e=>{const t=h.includes(e),r=_.includes(e),o=t||r||S||l!==s;return(0,E.jsxs)(f.Chess,{onClick:()=>((e,t)=>{S||t||(C?g.emit("chessDown",n,e):T(l,e))})(e,o),$disabled:o,children:[t&&(0,E.jsx)(f.CircleIcon,{}),r&&(0,E.jsx)(f.CloseIcon,{})]},e)}))}),(0,E.jsx)(f.RestartButton,{onClick:P,children:"Restart Game"})]})}}}]);
//# sourceMappingURL=601.97a4069c.chunk.js.map