{"version":3,"file":"js/445.395220b5.chunk.js","mappings":"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","sources":["webpack://react_game/./src/constants/ticTacToe.ts","webpack://react_game/./src/pages/Home/reducer.ts","webpack://react_game/./src/components/InfoSection.tsx","webpack://react_game/./src/assets/circle.svg","webpack://react_game/./src/assets/close.svg","webpack://react_game/./src/pages/Home/style.tsx","webpack://react_game/./src/pages/Home/index.tsx"],"sourcesContent":["export const WIN_STATUS_LIST = [\n  // 橫線\n  [1, 2, 3],\n  [4, 5, 6],\n  [7, 8, 9],\n  // 直線\n  [1, 4, 7],\n  [2, 5, 8],\n  [3, 6, 9],\n  // 斜線\n  [1, 5, 9],\n  [3, 5, 7],\n];\n\nexport const T = 1;\n","import { produce } from 'immer';\nimport { Socket } from 'socket.io-client';\nimport { WIN_STATUS_LIST } from '@/constants/ticTacToe';\n\nexport enum RolesEnum {\n  PLAYER_ONE,\n  PLAYER_TWO,\n}\n\ntype DispatchActionType =\n  | { type: 'RESTART_GAME' }\n  | { type: 'SET_PLAYER_ONE_CHESS'; payload: number }\n  | { type: 'SET_PLAYER_TWO_CHESS'; payload: number }\n  | { type: 'SET_ROLE'; payload: RolesEnum }\n  | { type: 'CHANGE_MODE'; payload: ModeType }\n  | { type: 'SET_SOCKET'; payload: Socket };\n\ntype ModeType = 'single' | 'multi';\n\ntype TicTacToeType = {\n  playOneChess: number[];\n  playTwoChess: number[];\n  playOneRemainSteps: number[][];\n  playTwoRemainSteps: number[][];\n  currentRole: RolesEnum;\n  currentRound: RolesEnum;\n  isPlayerOneWin: boolean;\n  isPlayerTwoWin: boolean;\n  isGameEnd: boolean;\n  mode: ModeType;\n  ws: Socket | null;\n};\n\nexport const ticTacToeInitState: TicTacToeType = {\n  playOneChess: [],\n  playTwoChess: [],\n  playOneRemainSteps: [],\n  playTwoRemainSteps: [],\n  currentRole: RolesEnum.PLAYER_ONE,\n  currentRound: RolesEnum.PLAYER_ONE,\n  isPlayerOneWin: false,\n  isPlayerTwoWin: false,\n  isGameEnd: false,\n  mode: 'single',\n  ws: null,\n};\n\nconst getRemainSteps = (chesses: number[]) => {\n  return WIN_STATUS_LIST.map((winStatus) => {\n    return winStatus.filter((chessNumber) => !chesses.includes(chessNumber));\n  });\n};\n\nconst isSomeoneWin = (remainSteps: number[][]) => {\n  return remainSteps.some((steps) => steps.length === 0);\n};\n\nexport const reducer = produce(\n  (draft: TicTacToeType, action: DispatchActionType) => {\n    switch (action.type) {\n      case 'SET_PLAYER_ONE_CHESS': {\n        draft.playOneChess.push(action.payload);\n        draft.playOneRemainSteps = getRemainSteps(draft.playOneChess);\n        draft.isPlayerOneWin = isSomeoneWin(draft.playOneRemainSteps);\n        draft.isGameEnd = draft.isPlayerOneWin;\n        draft.currentRound = RolesEnum.PLAYER_TWO;\n        if (draft.mode !== 'multi') {\n          draft.currentRole = RolesEnum.PLAYER_TWO;\n        }\n        break;\n      }\n      case 'SET_PLAYER_TWO_CHESS': {\n        draft.playTwoChess.push(action.payload);\n        draft.playTwoRemainSteps = getRemainSteps(draft.playTwoChess);\n        draft.isPlayerTwoWin = isSomeoneWin(draft.playTwoRemainSteps);\n        draft.isGameEnd = draft.isPlayerTwoWin;\n        draft.currentRound = RolesEnum.PLAYER_ONE;\n        if (draft.mode !== 'multi') {\n          draft.currentRole = RolesEnum.PLAYER_ONE;\n        }\n        break;\n      }\n      case 'SET_ROLE': {\n        draft.currentRole = action.payload;\n        break;\n      }\n      case 'CHANGE_MODE': {\n        draft.mode = action.payload;\n        break;\n      }\n      case 'RESTART_GAME': {\n        Object.assign(draft, ticTacToeInitState);\n        break;\n      }\n      case 'SET_SOCKET': {\n        draft.ws = action.payload;\n        break;\n      }\n      default:\n        break;\n    }\n  },\n);\n","import React from 'react';\nimport styled from 'styled-components';\nimport { RolesEnum } from '@/pages/Home/reducer';\n\ntype Props = {\n  currentRole: RolesEnum;\n  winRole: number | false;\n  isGameOver: boolean;\n};\n\nfunction InfoSection({ currentRole, winRole, isGameOver }: Props) {\n  const otherPlayerName = '對方';\n  const roleText =\n    currentRole === RolesEnum.PLAYER_ONE ? '您' : otherPlayerName;\n  const isTie = isGameOver && winRole === false;\n  const winText = `遊戲結束，${winRole === RolesEnum.PLAYER_ONE ? '恭喜您' : otherPlayerName}獲勝`;\n  const gameEndText = isTie ? '遊戲結束：平手' : winText;\n  const title = isGameOver ? gameEndText : `輪到${roleText}選擇`;\n\n  return (\n    <StyledInfoText>\n      <StyledTitle>圈圈叉叉小遊戲</StyledTitle>\n      {title}\n    </StyledInfoText>\n  );\n}\n\nexport default InfoSection;\n\nconst StyledInfoText = styled.div`\n  color: #121212;\n  font-size: 20px;\n  text-align: center;\n  margin-bottom: 20px;\n`;\nconst StyledTitle = styled.h1`\n  font-size: 24px;\n  text-align: center;\n  margin: 10px 0;\n`;\n","var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nimport { forwardRef } from \"react\";\nconst SvgCircle = (_ref, ref) => {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 512 512\",\n    ref: ref,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256zM256 48C141.1 48 48 141.1 48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48z\"\n  })));\n};\nconst ForwardRef = /*#__PURE__*/forwardRef(SvgCircle);\nexport { ForwardRef as ReactComponent };\nexport default __webpack_public_path__ + \"5cfe7dbbb2266e223e77adc22b898a52.svg\";","var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nimport { forwardRef } from \"react\";\nconst SvgClose = (_ref, ref) => {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 492 492\",\n    ref: ref,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M300.188,246L484.14,62.04c5.06-5.064,7.852-11.82,7.86-19.024c0-7.208-2.792-13.972-7.86-19.028L468.02,7.872 c-5.068-5.076-11.824-7.856-19.036-7.856c-7.2,0-13.956,2.78-19.024,7.856L246.008,191.82L62.048,7.872    c-5.06-5.076-11.82-7.856-19.028-7.856c-7.2,0-13.96,2.78-19.02,7.856L7.872,23.988c-10.496,10.496-10.496,27.568,0,38.052    L191.828,246L7.872,429.952c-5.064,5.072-7.852,11.828-7.852,19.032c0,7.204,2.788,13.96,7.852,19.028l16.124,16.116    c5.06,5.072,11.824,7.856,19.02,7.856c7.208,0,13.968-2.784,19.028-7.856l183.96-183.952l183.952,183.952    c5.068,5.072,11.824,7.856,19.024,7.856h0.008c7.204,0,13.96-2.784,19.028-7.856l16.12-16.116    c5.06-5.064,7.852-11.824,7.852-19.028c0-7.204-2.792-13.96-7.852-19.028L300.188,246z\"\n  })));\n};\nconst ForwardRef = /*#__PURE__*/forwardRef(SvgClose);\nexport { ForwardRef as ReactComponent };\nexport default __webpack_public_path__ + \"71b6ba4cbd8ee014d96aacc515d8ec53.svg\";","import styled from 'styled-components';\nimport { ReactComponent as CircleIcon } from '@/assets/circle.svg';\nimport { ReactComponent as CloseIcon } from '@/assets/close.svg';\n\nconst S = {\n  Container: styled.div`\n    width: 100%;\n    max-width: 600px;\n    margin: 0 auto;\n    padding: 16px;\n    background: white;\n    border-radius: 10px;\n  `,\n\n  Checkerboard: styled.div`\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 4px;\n    width: 100%;\n    margin-bottom: 20px;\n  `,\n\n  Chess: styled.div<{ $disabled: boolean }>`\n    background: ${({ theme }) => theme.chess.normal};\n    border-radius: 16px;\n    padding: 16px;\n    aspect-ratio: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    &:hover {\n      background-color: ${({ $disabled, theme }) =>\n        $disabled ? theme.chess.normal : theme.chess.hover};\n    }\n  `,\n  CircleIcon: styled(CircleIcon)`\n    fill: white;\n    width: 80%;\n  `,\n\n  CloseIcon: styled(CloseIcon)`\n    fill: white;\n    width: 80%;\n  `,\n  RestartButton: styled.button`\n    background: ${({ theme }) => theme.button.normal};\n    color: ${({ theme }) => theme.color};\n    border: none;\n    border-radius: 10px;\n    width: 33%;\n    padding: 10px 16px;\n    display: block;\n    margin: 10px auto;\n    &:hover {\n      background-color: ${({ theme }) => theme.button.hover};\n    }\n  `,\n  ToggleModeButton: styled.button`\n    background: ${({ theme }) => theme.button.normal};\n    color: ${({ theme }) => theme.color};\n    border: none;\n    border-radius: 10px;\n    width: 33%;\n    padding: 10px 16px;\n    display: block;\n    margin: 10px auto;\n    &:hover {\n      background-color: ${({ theme }) => theme.button.hover};\n    }\n  `,\n};\n\nexport default S;\n","import { useEffect, useReducer } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Socket, io } from 'socket.io-client';\nimport { RolesEnum, reducer, ticTacToeInitState } from './reducer';\nimport InfoSection from '@/components/InfoSection';\nimport S from './style';\n\ntype JoinRoomParams = {\n  isSuccess: boolean;\n  playerIndex?: RolesEnum;\n};\nconst CHESS_COUNTS = 9;\nconst chessNumbers = [...Array(CHESS_COUNTS)].map((_, i) => i + 1);\n\nfunction Home() {\n  const [state, dispatch] = useReducer(reducer, ticTacToeInitState);\n  const { roomId } = useParams();\n  const {\n    currentRole,\n    currentRound,\n    isPlayerOneWin,\n    isPlayerTwoWin,\n    playOneChess,\n    playTwoChess,\n    mode,\n    ws,\n  } = state;\n\n  const isMultiPlayerMode = mode === 'multi';\n\n  const isGameOver =\n    isPlayerOneWin ||\n    isPlayerTwoWin ||\n    playOneChess.length + playTwoChess.length === CHESS_COUNTS;\n\n  const winRole =\n    isGameOver &&\n    (isPlayerOneWin ? RolesEnum.PLAYER_ONE : RolesEnum.PLAYER_TWO);\n\n  const handleChessClick = (chessNumber: number, disabled: boolean) => {\n    if (isGameOver || disabled) return;\n    if (isMultiPlayerMode) {\n      ws!.emit('chessDown', roomId, chessNumber);\n    } else {\n      dispatchChessAction(currentRole, chessNumber);\n    }\n  };\n\n  const restartGame = () => dispatch({ type: 'RESTART_GAME' });\n\n  const dispatchChessAction = (role: RolesEnum, chessNumber: number) => {\n    if (role === RolesEnum.PLAYER_ONE) {\n      dispatch({ type: 'SET_PLAYER_ONE_CHESS', payload: chessNumber });\n    } else {\n      dispatch({ type: 'SET_PLAYER_TWO_CHESS', payload: chessNumber });\n    }\n  };\n\n  const initWebSocket = (socket: Socket) => {\n    // 對 getMessage 設定監聽，如果 server 有透過 getMessage 傳送訊息，將會在此被捕捉\n    if (socket) {\n      socket.on('join', ({ isSuccess, playerIndex }: JoinRoomParams) => {\n        if (typeof playerIndex === 'undefined' || !isSuccess) return;\n        dispatch({ type: 'SET_ROLE', payload: playerIndex });\n        console.log('join', { isSuccess, playerIndex });\n      });\n      socket.on(\n        'chessDown',\n        ({\n          chessIndex,\n          playerIndex,\n        }: {\n          chessIndex: number;\n          playerIndex: RolesEnum;\n        }) => {\n          dispatchChessAction(playerIndex, chessIndex);\n        },\n      );\n    }\n  };\n\n  useEffect(() => {\n    let socket: Socket;\n    if (roomId) {\n      socket = io('http://localhost:3000');\n      socket.on('connect', () => {\n        socket.emit('join', roomId);\n      });\n      initWebSocket(socket);\n      dispatch({ type: 'SET_SOCKET', payload: socket });\n      dispatch({ type: 'CHANGE_MODE', payload: 'multi' });\n    }\n    return () => {\n      if (socket) {\n        socket.emit('disconnect', roomId);\n      }\n    };\n  }, [roomId]);\n\n  const handleModeChange = () => {\n    const nextMode = isMultiPlayerMode ? 'multi' : 'single';\n    dispatch({ type: 'CHANGE_MODE', payload: nextMode });\n  };\n\n  return (\n    <S.Container>\n      <InfoSection\n        currentRole={currentRole}\n        isGameOver={isGameOver}\n        winRole={winRole}\n      />\n      <button\n        type='button'\n        onClick={() => ws!.emit('join', roomId)}\n      >\n        加入\n      </button>\n      <button\n        type='button'\n        onClick={() => ws!.emit('leave', roomId)}\n      >\n        離開\n      </button>\n      <S.ToggleModeButton onClick={handleModeChange}>\n        {isMultiPlayerMode ? '多人模式' : '單人模式'}\n      </S.ToggleModeButton>\n      <S.Checkerboard>\n        {chessNumbers.map((number) => {\n          const hasSelfPlayerChess = playOneChess.includes(number);\n          const hasOtherPlayerChess = playTwoChess.includes(number);\n          const disabled =\n            hasSelfPlayerChess ||\n            hasOtherPlayerChess ||\n            currentRole !== currentRound;\n\n          return (\n            <S.Chess\n              key={number}\n              onClick={() => handleChessClick(number, disabled)}\n              $disabled={disabled}\n            >\n              {hasSelfPlayerChess && <S.CircleIcon />}\n              {hasOtherPlayerChess && <S.CloseIcon />}\n            </S.Chess>\n          );\n        })}\n      </S.Checkerboard>\n      <S.RestartButton onClick={restartGame}>Restart Game</S.RestartButton>\n    </S.Container>\n  );\n}\n\nexport default Home;\n"],"names":["WIN_STATUS_LIST","RolesEnum","ticTacToeInitState","playOneChess","playTwoChess","playOneRemainSteps","playTwoRemainSteps","currentRole","PLAYER_ONE","currentRound","isPlayerOneWin","isPlayerTwoWin","isGameEnd","mode","ws","getRemainSteps","chesses","map","winStatus","filter","chessNumber","includes","isSomeoneWin","remainSteps","some","steps","length","reducer","produce","draft","action","type","push","payload","PLAYER_TWO","Object","assign","_ref","winRole","isGameOver","roleText","isTie","winText","title","_jsxs","StyledInfoText","children","_jsx","StyledTitle","styled","div","withConfig","displayName","h1","_path","_extends","bind","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","SvgCircle","ref","titleId","props","xmlns","viewBox","id","d","ForwardRef","forwardRef","SvgClose","Container","Checkerboard","Chess","theme","chess","normal","_ref2","$disabled","hover","CircleIcon","CloseIcon","RestartButton","button","_ref3","_ref4","color","_ref5","ToggleModeButton","_ref6","_ref7","_ref8","chessNumbers","Array","_","state","dispatch","useReducer","roomId","useParams","isMultiPlayerMode","dispatchChessAction","role","useEffect","socket","io","on","emit","isSuccess","playerIndex","console","log","chessIndex","initWebSocket","S","InfoSection","onClick","handleModeChange","number","hasSelfPlayerChess","hasOtherPlayerChess","disabled","handleChessClick","restartGame"],"sourceRoot":""}