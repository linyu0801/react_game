{"version":3,"file":"js/445.a345148e.chunk.js","mappings":"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","sources":["webpack://react_game/./src/constants/ticTacToe.ts","webpack://react_game/./src/pages/Home/reducer.ts","webpack://react_game/./src/components/InfoSection.tsx","webpack://react_game/./src/assets/circle.svg","webpack://react_game/./src/assets/close.svg","webpack://react_game/./src/pages/Home/style.tsx","webpack://react_game/./src/pages/Home/index.tsx"],"sourcesContent":["export const WIN_STATUS_LIST = [\n  // 橫線\n  [1, 2, 3],\n  [4, 5, 6],\n  [7, 8, 9],\n  // 直線\n  [1, 4, 7],\n  [2, 5, 8],\n  [3, 6, 9],\n  // 斜線\n  [1, 5, 9],\n  [3, 5, 7],\n];\n\nexport const T = 1;\n","import { produce } from 'immer';\nimport { Socket } from 'socket.io-client';\nimport { WIN_STATUS_LIST } from '@/constants/ticTacToe';\n\nexport enum RolesEnum {\n  PLAYER_ONE,\n  PLAYER_TWO,\n}\n\ntype DispatchActionType =\n  | { type: 'RESTART_GAME' }\n  | { type: 'SET_PLAYER_ONE_CHESS'; payload: number }\n  | { type: 'SET_PLAYER_TWO_CHESS'; payload: number }\n  | { type: 'SET_ROLE'; payload: RolesEnum }\n  | { type: 'CHANGE_MODE'; payload: ModeType }\n  | { type: 'SET_SOCKET'; payload: Socket };\n\ntype ModeType = 'single' | 'multi';\n\ntype TicTacToeType = {\n  playOneChess: number[];\n  playTwoChess: number[];\n  playOneRemainSteps: number[][];\n  playTwoRemainSteps: number[][];\n  currentRole: RolesEnum;\n  isPlayerOneWin: boolean;\n  isPlayerTwoWin: boolean;\n  isGameEnd: boolean;\n  mode: ModeType;\n  ws: Socket | null;\n};\n\nexport const ticTacToeInitState: TicTacToeType = {\n  playOneChess: [],\n  playTwoChess: [],\n  playOneRemainSteps: [],\n  playTwoRemainSteps: [],\n  currentRole: RolesEnum.PLAYER_ONE,\n  isPlayerOneWin: false,\n  isPlayerTwoWin: false,\n  isGameEnd: false,\n  mode: 'single',\n  ws: null,\n};\n\nconst getRemainSteps = (chesses: number[]) => {\n  return WIN_STATUS_LIST.map((winStatus) => {\n    return winStatus.filter((chessNumber) => !chesses.includes(chessNumber));\n  });\n};\n\nconst isSomeoneWin = (remainSteps: number[][]) => {\n  return remainSteps.some((steps) => steps.length === 0);\n};\n\nexport const reducer = produce(\n  (draft: TicTacToeType, action: DispatchActionType) => {\n    switch (action.type) {\n      case 'SET_PLAYER_ONE_CHESS': {\n        draft.playOneChess.push(action.payload);\n        draft.playOneRemainSteps = getRemainSteps(draft.playOneChess);\n        draft.isPlayerOneWin = isSomeoneWin(draft.playOneRemainSteps);\n        draft.isGameEnd = draft.isPlayerOneWin;\n        if (draft.mode !== 'multi') {\n          draft.currentRole = RolesEnum.PLAYER_TWO;\n        }\n        break;\n      }\n      case 'SET_PLAYER_TWO_CHESS': {\n        draft.playTwoChess.push(action.payload);\n        draft.playTwoRemainSteps = getRemainSteps(draft.playTwoChess);\n        draft.isPlayerTwoWin = isSomeoneWin(draft.playTwoRemainSteps);\n        draft.isGameEnd = draft.isPlayerTwoWin;\n        if (draft.mode !== 'multi') {\n          draft.currentRole = RolesEnum.PLAYER_ONE;\n        }\n        break;\n      }\n      case 'SET_ROLE': {\n        draft.currentRole = action.payload;\n        break;\n      }\n      case 'CHANGE_MODE': {\n        draft.mode = action.payload;\n        break;\n      }\n      case 'RESTART_GAME': {\n        Object.assign(draft, ticTacToeInitState);\n        break;\n      }\n      case 'SET_SOCKET': {\n        draft.ws = action.payload;\n        break;\n      }\n      default:\n        break;\n    }\n  },\n);\n","import React from 'react';\nimport styled from 'styled-components';\nimport { RolesEnum } from '@/pages/Home/reducer';\n\ntype Props = {\n  currentRole: RolesEnum;\n  winRole: number | false;\n  isGameEnd: boolean;\n};\n\nfunction InfoSection({ currentRole, winRole, isGameEnd }: Props) {\n  const otherPlayerName = '對方';\n  const roleText =\n    currentRole === RolesEnum.PLAYER_ONE ? '您' : otherPlayerName;\n  const isTie = isGameEnd && winRole === false;\n  const winText = `遊戲結束，${winRole === RolesEnum.PLAYER_ONE ? '恭喜您' : otherPlayerName}獲勝`;\n  const gameEndText = isTie ? '遊戲結束：平手' : winText;\n  const title = isGameEnd ? gameEndText : `輪到${roleText}選擇`;\n\n  return (\n    <StyledInfoText>\n      <StyledTitle>圈圈叉叉小遊戲</StyledTitle>\n      {title}\n    </StyledInfoText>\n  );\n}\n\nexport default InfoSection;\n\nconst StyledInfoText = styled.div`\n  color: #121212;\n  font-size: 20px;\n  text-align: center;\n  margin-bottom: 20px;\n`;\nconst StyledTitle = styled.h1`\n  font-size: 24px;\n  text-align: center;\n  margin: 10px 0;\n`;\n","var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nimport { forwardRef } from \"react\";\nconst SvgCircle = (_ref, ref) => {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 512 512\",\n    ref: ref,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256zM256 48C141.1 48 48 141.1 48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48z\"\n  })));\n};\nconst ForwardRef = /*#__PURE__*/forwardRef(SvgCircle);\nexport { ForwardRef as ReactComponent };\nexport default __webpack_public_path__ + \"5cfe7dbbb2266e223e77adc22b898a52.svg\";","var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nimport { forwardRef } from \"react\";\nconst SvgClose = (_ref, ref) => {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 492 492\",\n    ref: ref,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M300.188,246L484.14,62.04c5.06-5.064,7.852-11.82,7.86-19.024c0-7.208-2.792-13.972-7.86-19.028L468.02,7.872 c-5.068-5.076-11.824-7.856-19.036-7.856c-7.2,0-13.956,2.78-19.024,7.856L246.008,191.82L62.048,7.872    c-5.06-5.076-11.82-7.856-19.028-7.856c-7.2,0-13.96,2.78-19.02,7.856L7.872,23.988c-10.496,10.496-10.496,27.568,0,38.052    L191.828,246L7.872,429.952c-5.064,5.072-7.852,11.828-7.852,19.032c0,7.204,2.788,13.96,7.852,19.028l16.124,16.116    c5.06,5.072,11.824,7.856,19.02,7.856c7.208,0,13.968-2.784,19.028-7.856l183.96-183.952l183.952,183.952    c5.068,5.072,11.824,7.856,19.024,7.856h0.008c7.204,0,13.96-2.784,19.028-7.856l16.12-16.116    c5.06-5.064,7.852-11.824,7.852-19.028c0-7.204-2.792-13.96-7.852-19.028L300.188,246z\"\n  })));\n};\nconst ForwardRef = /*#__PURE__*/forwardRef(SvgClose);\nexport { ForwardRef as ReactComponent };\nexport default __webpack_public_path__ + \"71b6ba4cbd8ee014d96aacc515d8ec53.svg\";","import styled from 'styled-components';\nimport { ReactComponent as CircleIcon } from '@/assets/circle.svg';\nimport { ReactComponent as CloseIcon } from '@/assets/close.svg';\n\nconst S = {\n  Container: styled.div`\n    width: 100%;\n    max-width: 600px;\n    margin: 0 auto;\n    padding: 16px;\n    background: white;\n    border-radius: 10px;\n  `,\n\n  Checkerboard: styled.div`\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 4px;\n    width: 100%;\n    margin-bottom: 20px;\n  `,\n\n  Chess: styled.div<{ $disabled: boolean }>`\n    background: ${({ theme }) => theme.chess.normal};\n    border-radius: 16px;\n    padding: 16px;\n    aspect-ratio: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    &:hover {\n      background-color: ${({ $disabled, theme }) =>\n        $disabled ? theme.chess.normal : theme.chess.hover};\n    }\n  `,\n  CircleIcon: styled(CircleIcon)`\n    fill: white;\n    width: 80%;\n  `,\n\n  CloseIcon: styled(CloseIcon)`\n    fill: white;\n    width: 80%;\n  `,\n  RestartButton: styled.button`\n    background: ${({ theme }) => theme.button.normal};\n    color: ${({ theme }) => theme.color};\n    border: none;\n    border-radius: 10px;\n    width: 33%;\n    padding: 10px 16px;\n    display: block;\n    margin: 10px auto;\n    &:hover {\n      background-color: ${({ theme }) => theme.button.hover};\n    }\n  `,\n  ToggleModeButton: styled.button`\n    background: ${({ theme }) => theme.button.normal};\n    color: ${({ theme }) => theme.color};\n    border: none;\n    border-radius: 10px;\n    width: 33%;\n    padding: 10px 16px;\n    display: block;\n    margin: 10px auto;\n    &:hover {\n      background-color: ${({ theme }) => theme.button.hover};\n    }\n  `,\n};\n\nexport default S;\n","import { useEffect, useReducer } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Socket, io } from 'socket.io-client';\nimport { RolesEnum, reducer, ticTacToeInitState } from './reducer';\nimport InfoSection from '@/components/InfoSection';\nimport S from './style';\n\ntype JoinRoomParams = {\n  isSuccess: boolean;\n  playerIndex?: RolesEnum;\n};\nconst CHESS_TOTAL = 9;\nconst chessNumbers = [...Array(CHESS_TOTAL)].map((_, i) => i + 1);\n\nfunction Home() {\n  const [state, dispatch] = useReducer(reducer, ticTacToeInitState);\n  const { roomId } = useParams();\n  const {\n    currentRole,\n    isPlayerOneWin,\n    isPlayerTwoWin,\n    playOneChess,\n    playTwoChess,\n    mode,\n    ws,\n  } = state;\n  console.log(currentRole);\n  const isMultiMode = mode === 'multi';\n\n  const isGameEnd =\n    isPlayerOneWin ||\n    isPlayerTwoWin ||\n    playOneChess.length + playTwoChess.length === CHESS_TOTAL;\n\n  const winRole =\n    isGameEnd && (isPlayerOneWin ? RolesEnum.PLAYER_ONE : RolesEnum.PLAYER_TWO);\n\n  // console.log({ playOneChess, playTwoChess, currentRole });\n  const handleChessClick = (chessNumber: number, disabled: boolean) => {\n    if (isGameEnd || disabled) return;\n    if (isMultiMode) {\n      ws!.emit('chessDown', chessNumber);\n    } else {\n      dispatchChessAction(currentRole, chessNumber);\n    }\n  };\n\n  const restartGame = () => dispatch({ type: 'RESTART_GAME' });\n\n  const dispatchChessAction = (\n    currentPeople: RolesEnum,\n    chessNumber: number,\n  ) => {\n    if (currentPeople === RolesEnum.PLAYER_ONE) {\n      dispatch({ type: 'SET_PLAYER_ONE_CHESS', payload: chessNumber });\n    } else {\n      dispatch({ type: 'SET_PLAYER_TWO_CHESS', payload: chessNumber });\n    }\n  };\n\n  const initWebSocket = (socket: Socket) => {\n    let currentPeople = 0;\n    // 對 getMessage 設定監聽，如果 server 有透過 getMessage 傳送訊息，將會在此被捕捉\n    if (socket) {\n      socket.on('join', (message) => {\n        const { isSuccess, playerIndex }: JoinRoomParams = message;\n        if (typeof playerIndex === 'undefined' || !isSuccess) return;\n        currentPeople = playerIndex;\n        dispatch({ type: 'SET_ROLE', payload: playerIndex });\n        console.log('join', message);\n      });\n      socket.on('chessDown', (chessIndex) => {\n        console.log('chessDown', chessIndex);\n        dispatchChessAction(currentPeople, chessIndex);\n      });\n    }\n  };\n\n  useEffect(() => {\n    let socket: Socket;\n    if (roomId) {\n      dispatch({ type: 'CHANGE_MODE', payload: 'multi' });\n      socket = io('http://localhost:3000');\n      socket.on('connect', () => {\n        socket.emit('join', roomId);\n      });\n      initWebSocket(socket);\n      // setTimeout(() => {\n      //   socket.emit('join', roomId);\n      // }, 1000);\n\n      dispatch({ type: 'SET_SOCKET', payload: socket });\n    }\n    return () => {\n      if (socket) {\n        socket.emit('disconnect', roomId);\n      }\n    };\n  }, [roomId]);\n\n  const handleModeChange = () => {\n    const nextMode = isMultiMode ? 'multi' : 'single';\n    dispatch({ type: 'CHANGE_MODE', payload: nextMode });\n  };\n\n  return (\n    <S.Container>\n      <InfoSection\n        currentRole={currentRole}\n        isGameEnd={isGameEnd}\n        winRole={winRole}\n      />\n      <S.ToggleModeButton onClick={handleModeChange}>\n        {isMultiMode ? '多人模式' : '單人模式'}\n      </S.ToggleModeButton>\n      <S.Checkerboard>\n        {chessNumbers.map((number) => {\n          const hasSelfPlayerChess = playOneChess.includes(number);\n          const hasOtherPlayerChess = playTwoChess.includes(number);\n          const disabled = hasSelfPlayerChess || hasOtherPlayerChess;\n          return (\n            <S.Chess\n              key={number}\n              onClick={() => handleChessClick(number, disabled)}\n              $disabled={disabled}\n            >\n              {hasSelfPlayerChess && <S.CircleIcon />}\n              {hasOtherPlayerChess && <S.CloseIcon />}\n            </S.Chess>\n          );\n        })}\n      </S.Checkerboard>\n      <S.RestartButton onClick={restartGame}>Restart Game</S.RestartButton>\n    </S.Container>\n  );\n}\n\nexport default Home;\n"],"names":["WIN_STATUS_LIST","RolesEnum","ticTacToeInitState","playOneChess","playTwoChess","playOneRemainSteps","playTwoRemainSteps","currentRole","PLAYER_ONE","isPlayerOneWin","isPlayerTwoWin","isGameEnd","mode","ws","getRemainSteps","chesses","map","winStatus","filter","chessNumber","includes","isSomeoneWin","remainSteps","some","steps","length","reducer","produce","draft","action","type","push","payload","PLAYER_TWO","Object","assign","_ref","winRole","roleText","isTie","winText","title","_jsxs","StyledInfoText","children","_jsx","StyledTitle","styled","div","withConfig","displayName","h1","_path","_extends","bind","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","SvgCircle","ref","titleId","props","xmlns","viewBox","id","d","ForwardRef","forwardRef","SvgClose","Container","Checkerboard","Chess","theme","chess","normal","_ref2","$disabled","hover","CircleIcon","CloseIcon","RestartButton","button","_ref3","_ref4","color","_ref5","ToggleModeButton","_ref6","_ref7","_ref8","chessNumbers","Array","_","state","dispatch","useReducer","roomId","useParams","console","log","isMultiMode","dispatchChessAction","currentPeople","useEffect","socket","io","on","emit","message","isSuccess","playerIndex","chessIndex","initWebSocket","S","InfoSection","onClick","handleModeChange","number","hasSelfPlayerChess","hasOtherPlayerChess","disabled","handleChessClick","restartGame"],"sourceRoot":""}