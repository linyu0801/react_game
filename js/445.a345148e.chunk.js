"use strict";(self.webpackChunkreact_game=self.webpackChunkreact_game||[]).push([[445],{445:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var o=n(294),r=n(250),a=n(177),l=n(513);const i=[[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]];let s=function(e){return e[e.PLAYER_ONE=0]="PLAYER_ONE",e[e.PLAYER_TWO=1]="PLAYER_TWO",e}({});const c={playOneChess:[],playTwoChess:[],playOneRemainSteps:[],playTwoRemainSteps:[],currentRole:s.PLAYER_ONE,isPlayerOneWin:!1,isPlayerTwoWin:!1,isGameEnd:!1,mode:"single",ws:null},d=e=>i.map((t=>t.filter((t=>!e.includes(t))))),p=e=>e.some((e=>0===e.length)),u=(0,l.Uy)(((e,t)=>{switch(t.type){case"SET_PLAYER_ONE_CHESS":e.playOneChess.push(t.payload),e.playOneRemainSteps=d(e.playOneChess),e.isPlayerOneWin=p(e.playOneRemainSteps),e.isGameEnd=e.isPlayerOneWin,"multi"!==e.mode&&(e.currentRole=s.PLAYER_TWO);break;case"SET_PLAYER_TWO_CHESS":e.playTwoChess.push(t.payload),e.playTwoRemainSteps=d(e.playTwoChess),e.isPlayerTwoWin=p(e.playTwoRemainSteps),e.isGameEnd=e.isPlayerTwoWin,"multi"!==e.mode&&(e.currentRole=s.PLAYER_ONE);break;case"SET_ROLE":e.currentRole=t.payload;break;case"CHANGE_MODE":e.mode=t.payload;break;case"RESTART_GAME":Object.assign(e,c);break;case"SET_SOCKET":e.ws=t.payload}}));var h=n(133),y=n(893);var m=function(e){let{currentRole:t,winRole:n,isGameEnd:o}=e;const r=t===s.PLAYER_ONE?"您":"對方",a=o&&!1===n,l=`遊戲結束，${n===s.PLAYER_ONE?"恭喜您":"對方"}獲勝`,i=o?a?"遊戲結束：平手":l:`輪到${r}選擇`;return(0,y.jsxs)(E,{children:[(0,y.jsx)(g,{children:"圈圈叉叉小遊戲"}),i]})};const E=h.ZP.div.withConfig({displayName:"InfoSection__StyledInfoText"})(["color:#121212;font-size:20px;text-align:center;margin-bottom:20px;"]),g=h.ZP.h1.withConfig({displayName:"InfoSection__StyledTitle"})(["font-size:24px;text-align:center;margin:10px 0;"]);var w;function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},C.apply(this,arguments)}const _=(e,t)=>{let{title:n,titleId:r,...a}=e;return o.createElement("svg",C({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",ref:t,"aria-labelledby":r},a),n?o.createElement("title",{id:r},n):null,w||(w=o.createElement("path",{d:"M512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256zM256 48C141.1 48 48 141.1 48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48z"})))},b=(0,o.forwardRef)(_);var f;n.p;function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},O.apply(this,arguments)}const R=(e,t)=>{let{title:n,titleId:r,...a}=e;return o.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 492 492",ref:t,"aria-labelledby":r},a),n?o.createElement("title",{id:r},n):null,f||(f=o.createElement("path",{d:"M300.188,246L484.14,62.04c5.06-5.064,7.852-11.82,7.86-19.024c0-7.208-2.792-13.972-7.86-19.028L468.02,7.872 c-5.068-5.076-11.824-7.856-19.036-7.856c-7.2,0-13.956,2.78-19.024,7.856L246.008,191.82L62.048,7.872    c-5.06-5.076-11.82-7.856-19.028-7.856c-7.2,0-13.96,2.78-19.02,7.856L7.872,23.988c-10.496,10.496-10.496,27.568,0,38.052    L191.828,246L7.872,429.952c-5.064,5.072-7.852,11.828-7.852,19.032c0,7.204,2.788,13.96,7.852,19.028l16.124,16.116    c5.06,5.072,11.824,7.856,19.02,7.856c7.208,0,13.968-2.784,19.028-7.856l183.96-183.952l183.952,183.952    c5.068,5.072,11.824,7.856,19.024,7.856h0.008c7.204,0,13.96-2.784,19.028-7.856l16.12-16.116    c5.06-5.064,7.852-11.824,7.852-19.028c0-7.204-2.792-13.96-7.852-19.028L300.188,246z"})))},x=(0,o.forwardRef)(R);n.p;var T={Container:h.ZP.div.withConfig({displayName:"style__Container"})(["width:100%;max-width:600px;margin:0 auto;padding:16px;background:white;border-radius:10px;"]),Checkerboard:h.ZP.div.withConfig({displayName:"style__Checkerboard"})(["display:grid;grid-template-columns:repeat(3,1fr);gap:4px;width:100%;margin-bottom:20px;"]),Chess:h.ZP.div.withConfig({displayName:"style__Chess"})(["background:",";border-radius:16px;padding:16px;aspect-ratio:1;display:flex;align-items:center;justify-content:center;&:hover{background-color:",";}"],(e=>{let{theme:t}=e;return t.chess.normal}),(e=>{let{$disabled:t,theme:n}=e;return t?n.chess.normal:n.chess.hover})),CircleIcon:(0,h.ZP)(b).withConfig({displayName:"style__CircleIcon"})(["fill:white;width:80%;"]),CloseIcon:(0,h.ZP)(x).withConfig({displayName:"style__CloseIcon"})(["fill:white;width:80%;"]),RestartButton:h.ZP.button.withConfig({displayName:"style__RestartButton"})(["background:",";color:",";border:none;border-radius:10px;width:33%;padding:10px 16px;display:block;margin:10px auto;&:hover{background-color:",";}"],(e=>{let{theme:t}=e;return t.button.normal}),(e=>{let{theme:t}=e;return t.color}),(e=>{let{theme:t}=e;return t.button.hover})),ToggleModeButton:h.ZP.button.withConfig({displayName:"style__ToggleModeButton"})(["background:",";color:",";border:none;border-radius:10px;width:33%;padding:10px 16px;display:block;margin:10px auto;&:hover{background-color:",";}"],(e=>{let{theme:t}=e;return t.button.normal}),(e=>{let{theme:t}=e;return t.color}),(e=>{let{theme:t}=e;return t.button.hover}))};const P=[...Array(9)].map(((e,t)=>t+1));var S=function(){const[e,t]=(0,o.useReducer)(u,c),{roomId:n}=(0,r.UO)(),{currentRole:l,isPlayerOneWin:i,isPlayerTwoWin:d,playOneChess:p,playTwoChess:h,mode:E,ws:g}=e;console.log(l);const w="multi"===E,C=i||d||p.length+h.length===9,_=C&&(i?s.PLAYER_ONE:s.PLAYER_TWO),b=(e,n)=>{e===s.PLAYER_ONE?t({type:"SET_PLAYER_ONE_CHESS",payload:n}):t({type:"SET_PLAYER_TWO_CHESS",payload:n})};return(0,o.useEffect)((()=>{let e;return n&&(t({type:"CHANGE_MODE",payload:"multi"}),e=(0,a.io)("http://localhost:3000"),e.on("connect",(()=>{e.emit("join",n)})),(e=>{let n=0;e&&(e.on("join",(e=>{const{isSuccess:o,playerIndex:r}=e;void 0!==r&&o&&(n=r,t({type:"SET_ROLE",payload:r}),console.log("join",e))})),e.on("chessDown",(e=>{console.log("chessDown",e),b(n,e)})))})(e),t({type:"SET_SOCKET",payload:e})),()=>{e&&e.emit("disconnect",n)}}),[n]),(0,y.jsxs)(T.Container,{children:[(0,y.jsx)(m,{currentRole:l,isGameEnd:C,winRole:_}),(0,y.jsx)(T.ToggleModeButton,{onClick:()=>{t({type:"CHANGE_MODE",payload:w?"multi":"single"})},children:w?"多人模式":"單人模式"}),(0,y.jsx)(T.Checkerboard,{children:P.map((e=>{const t=p.includes(e),n=h.includes(e),o=t||n;return(0,y.jsxs)(T.Chess,{onClick:()=>((e,t)=>{C||t||(w?g.emit("chessDown",e):b(l,e))})(e,o),$disabled:o,children:[t&&(0,y.jsx)(T.CircleIcon,{}),n&&(0,y.jsx)(T.CloseIcon,{})]},e)}))}),(0,y.jsx)(T.RestartButton,{onClick:()=>t({type:"RESTART_GAME"}),children:"Restart Game"})]})}}}]);
//# sourceMappingURL=445.a345148e.chunk.js.map